# Example for an entry that has a *public A record* DNS entry
# The a record should point to the parent IP (in this case, centcom)
# Use the internal CA to issue a certificate
#
# sub.domain.com {
#   tls internal
#   reverse_proxy https://subdomain.spaniel-dragon.ts.net:443 {
#     transport http {
#       tls_server_name subdomain.spaniel-dragon.ts.net
#     }
#   }
# }

:80 {
  tls internal
  root * /www
  file_server
}

vpn.rsefer.com {
	response "VPN"
}

rss.vpn.rsefer.com {
	tls internal
  reverse_proxy https://rss.spaniel-dragon.ts.net:443 {
    transport http {
      tls_server_name rss.spaniel-dragon.ts.net
    }
  }
}

ha.vpn.rsefer.com, ha.ts.rsefer.com {
  tls internal
  reverse_proxy https://home-assistant.spaniel-dragon.ts.net:443 {
    transport http {
      tls_server_name home-assistant.spaniel-dragon.ts.net
    }
  }
}

go.vpn.rsefer.com {
  tls internal
  reverse_proxy https://go.spaniel-dragon.ts.net:443 {
    transport http {
      tls_server_name go.spaniel-dragon.ts.net
    }
  }
}
